# X) Summary of "Mastering Metasploit - Fourth Edition" - Chapter 1 part "Conducting a penetration test with Metasploit"  
This part of the book goes over the basic commandsand terms of metasploit, explains the benefits of using metasploit and shows a case study of breaking in to a domain controller.  
The basic terms of metasploit are:  
1. Exploits. Executable command that will expolit a vulnerability in a target.  
2. Payload. Code that is run on the target machine after exploitation.  
3. Auxiliary. Modules that provide additional functionalities.  
4. Encoders.  Provide obfuscaters for modules to avoid detection.  
# A) Starting up the practice lab and ensuring inaccessibility to the internet.  
First I opened VirtualBox and started up my two machines, the attacker and metasploitable.  
After that I pinged Google DNS on both machines, and pinged eachother.  
Results on attacker:  
<img width="281" height="122" alt="image" src="https://github.com/user-attachments/assets/c0f7bea5-1951-431c-b62f-f80683a4c95a" />  
Results on metasploitable:  
<img width="286" height="92" alt="image" src="https://github.com/user-attachments/assets/ce6917a5-7f0a-44e7-b7a3-c525a36d0605" />  
# B) Opening metasploit msfconsole.  
I opened the msfconsole by first initializing the metasploitable database with the command `sudo msfdb init`  
After this I opened the msfconsole with the command `sudo msfconsole`  
<img width="266" height="256" alt="image" src="https://github.com/user-attachments/assets/ba960ffd-8f15-4d90-ae61-27f46bc2bbdd" />  
# C) Finding metasploitable by portscanning.  
To find metasploitable I gave the command `db_nmap -sn 192.168.153.5`  
<img width="352" height="88" alt="image" src="https://github.com/user-attachments/assets/93cdc5af-d2bb-43c0-a50f-a38c286e2999" />  
As we can see form the capture above, it was found.  
# D) Portscanning metasplotable throughly.  
At first I did a bit lighter portscan with the command `db_nmap -p 1-65535 192.168.153.5`  
<img width="356" height="342" alt="image" src="https://github.com/user-attachments/assets/13078e09-b1ea-44e2-9b97-d7c919ae75a1" />
From this we can see 30 open ports, but not much information was gained from this.  
To gain more, I ran the portscan with these parameters `db_nmap -A -T4 -p 1-65535 192.168.153.5`  
This scan took close to 5 minutes  
<img width="356" height="365" alt="image" src="https://github.com/user-attachments/assets/ec8f7925-65d7-4ab8-a8dc-33e118d3d3eb" />  
(Results too long to show here)  
# E) Sorting the data from metasploit DB
I tried the commands `hosts` and `services`  
In hosts there wasn't anything to sort, there was only one host.  
There was alot more data in services and I tried different sorting methods, for example, i got only the open ports with `services -c ports`
Here are all the different ways you can manipulate the data.  
<img width="294" height="91" alt="image" src="https://github.com/user-attachments/assets/84e68d6c-3df4-44b8-9862-c517f727a6cd" />  
# F) Comparing metasploits own database to files made from the scans.  
After looking at the data saved to a separate file and metasploits own database system, it seems that the database is far superior.    
The saved files are basically just termial outputs of the scan, and is not structured in any way.  
Metasploits database functionality saves the data and structures to a much readable state and is easier to analyze.  
# G) Breaking into metasplotables vsftpd-service
The first step I took was finding the right exploit in metasploit for this service with the command `search vsftpd 2.3.4`  
<img width="561" height="109" alt="image" src="https://github.com/user-attachments/assets/474dce83-ab29-4753-888d-575b1aa4029b" />  
And after the right exploit was found, I executed it with the command `use 0 192.168.153.5`  
<img width="320" height="39" alt="image" src="https://github.com/user-attachments/assets/4a3a7b7f-98d1-44c1-b919-4094c3150fcf" />  
Because no payload was configured, it was defaulted to /cmd/unix/interact  
After that i set the remote hosts ip-address as a global variable with the command `setg RHOST 192.168.153.5`  
And now that all was set, I gave the command `exploit` and the attack was run.  
<img width="512" height="107" alt="image" src="https://github.com/user-attachments/assets/d74c31a3-991a-47d3-b95d-80a69cd76d17" />  
As we can see, it was successful.  
# H) Upgrading the session to meterpretr.  
I did this by backing out of the session and letting it sit in the backround.  
After this I gave the command `sessions -u 1` to upgrade the session.  
<img width="314" height="268" alt="image" src="https://github.com/user-attachments/assets/c56a487b-6211-4c55-8ffd-1c603818daab" />  
I tried to connect to the target machine via the new session and it was successful.  
<img width="272" height="51" alt="image" src="https://github.com/user-attachments/assets/7a6719b3-0ad3-46d0-b119-9da444f13c5f" />
# I) Gaining information for lateral movement.  
In this step i had some problems figuring out what targets were relevant, but I took some guesses and and lets hope I'm right :)  
First I navigated to etc/shadow to print out the password hashes, that can be (maybe) broken at a later time.  
<img width="269" height="300" alt="image" src="https://github.com/user-attachments/assets/49f83809-44b9-49a6-a133-ce08dda2bee7" />  
After this I navigated to /ssh file and printed out the ssh private keys. The keys can be used to gain further access.  
<img width="274" height="339" alt="image" src="https://github.com/user-attachments/assets/517579ff-fc26-4215-89f5-a3b07e91645f" />  
I also took out the users private ssh key.  
<img width="293" height="112" alt="image" src="https://github.com/user-attachments/assets/dcc9f5a9-ce2a-4b4f-b2ce-9f7195473610" />  
# J) Trying to break in using an another way.  
A first i was trying to get a SSH connection established using the private keys I got in the previous step, but unfortaneltly after banging my head against a wall for 2 hours, I gave up.  
Trying to figure out some other way, my mind came across the open telnet port, and just tried to connect to it via the command `telnet 192.168.153.5` and was met with this screen.  
<img width="311" height="227" alt="image" src="https://github.com/user-attachments/assets/e701f1ea-20f7-4d81-a44b-c5f4d4a49bc0" />  
As we can see, the credentials are neatly provided for us in the login screen. After trying the credentials, I was in 
<img width="303" height="134" alt="image" src="https://github.com/user-attachments/assets/6352e0d3-0320-400e-bd2f-534d4c85e1f4" />  
# K) Demonstrating meterpretr functionality
Meterpreter has quite a few different functionalitys, that can be displayed with the `help` command.  


# I) Saving a shell sessions in a file
I dont know if I understood the assignement correcly, but I started a shell sessions in meterpreter via the command `shell` and gave a few basic commands (ls,pwd).  
After that I saved the session in a file via command `script -fa log001.txt`  
<img width="180" height="33" alt="image" src="https://github.com/user-attachments/assets/ec618dd5-e723-4454-b1ba-08dbcc43a917" />

# Sources  
https://nmap.org/book/man-briefoptions.html
https://terokarvinen.com/tunkeutumistestaus/#kertausmateriaalia
https://www.offsec.com/metasploit-unleashed/msfconsole-commands/#setg






